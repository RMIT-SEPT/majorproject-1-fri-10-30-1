<!DOCTYPE html>
<html>

<head>
    <title>Booking - SEPT</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <header>
        <h1>AGME</h1>
    </header>

    <div>
        <h2>Booking</h2>
        <!-- add JS/React functions to respective 'onclick' properties -->
        <button id="serviceButton" class="bookType" onclick="createContent('serviceButton')">Book by Service</button>
        <!-- redirect to book by service page -->
        <button id="personButton" class="bookType" onclick="createContent('personButton')">Book by Person</button>
        <!-- redirect to book by person page -->
    </div>

    <script>
        var serviceBtn = "serviceButton";
        var personBtn = "personButton";
        
        function createContent(buttonId) {
            // make content visible
            document.getElementById("content").style.display= "inline-block";

            // if book by Service
            if (buttonId == serviceBtn) {
                // set "Book by Service" button as selected
                document.getElementById(buttonId).className = "selectedButton";
                // reset "Book by Person" button to non-selected
                document.getElementById(personBtn).className = "bookType";

                // document.getElementById("searchType").innerHTML = "Service";
                populateDropdown(buttonId);
            }

            // if book by Person
            else if (buttonId == personBtn){
                // set "Book by Person" button as selected
                document.getElementById(buttonId).className = "selectedButton";
                // reset "Book by Service" button to non-selected
                document.getElementById(serviceBtn).className = "bookType";

                // document.getElementById("searchType").innerHTML = "Person";
                populateDropdown(buttonId)
            }
        }

        //get SQL service data
        function populateDropdown(buttonId){

            //placeholders until we get SQL data
            var tempServices = ["service1", "service2", "service3"];
            var tempPeople = ["person1", "person2", "person3", "person4"];

            // get dropdown element
            var dropdown = document.getElementById("dropdown");

            // clear any options already in dropdown box
            var length = dropdown.options.length;
            for (i = length-1; i >= 0; i--) {
                dropdown.remove(i);
            }
            
            var listItems = [];
            if(buttonId === serviceBtn){
                listItems = tempServices;
                var option = document.createElement("option");
                option.value = listItems[i];
                option.appendChild(document.createTextNode("Select Service"));
                option.disabled = true;
                option.defaultSelected = true;
                dropdown.appendChild(option);
            }
            else if(buttonId === personBtn){
                listItems = tempPeople;
                var option = document.createElement("option");
                option.value = listItems[i];
                option.appendChild(document.createTextNode("Select Person"));
                option.disabled = true;
                option.defaultSelected = true;
                dropdown.appendChild(option);
            }

            //create an option for every value in the array
            for (var i = 0; i < listItems.length; i++){
                var option = document.createElement("option");
                option.value = listItems[i];
                option.appendChild(document.createTextNode(listItems[i]));
                dropdown.appendChild(option);
            }
        }

        //TODO
        function populateTable(){
            var table = document.getElementById("sessionTable");

            var tbody = document.createElement('tbody');
            table.appendChild(tbody);

            // QUERY BOOKING DATA of all bookingName that match the value of the dropdown box
            // for each value in the array, create a new row and append to table
        }
    </script>

    <div id="content">
        <!-- <h6 id="searchType">heading sample</h6> -->
        <select name="dropdown" id="dropdown"></select>
        <table id="sessionTable"></table>
        <button id="createBooking">Create Booking</button>
    </div>

</body>

</html>